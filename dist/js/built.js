var QueryLoader={overlay:"",loadBar:"",preloader:"",items:new Array,doneStatus:0,doneNow:0,selectorPreload:"body",ieLoadFixTime:2e3,ieTimeout:"",init:function(){if("MSIE 6.0,6.0"==navigator.userAgent.match(/MSIE (\d+(?:\.\d+)+(?:b\d*)?)/))return!1;"body"==QueryLoader.selectorPreload?(QueryLoader.spawnLoader(),QueryLoader.getImages(QueryLoader.selectorPreload),QueryLoader.createPreloading()):$(document).ready(function(){QueryLoader.spawnLoader(),QueryLoader.getImages(QueryLoader.selectorPreload),QueryLoader.createPreloading()}),QueryLoader.ieTimeout=setTimeout("QueryLoader.ieLoadFix()",QueryLoader.ieLoadFixTime)},ieLoadFix:function(){if(navigator.userAgent.match(/MSIE (\d+(?:\.\d+)+(?:b\d*)?)/)[0].match("MSIE"))for(;100/QueryLoader.doneStatus*QueryLoader.doneNow<100;)QueryLoader.imgCallback()},imgCallback:function(){QueryLoader.doneNow++,QueryLoader.animateLoader()},getImages:function(selector){$(selector).find("*:not(script)").each(function(){var url="";if("none"!=$(this).css("background-image"))var url=$(this).css("background-image");else if(void 0!==$(this).attr("src"))var url=$(this).attr("src");url=url.replace('url("',""),url=url.replace("url(",""),url=url.replace('")',""),url=url.replace(")",""),url.length>0&&QueryLoader.items.push(url)})},createPreloading:function(){QueryLoader.preloader=$("<div></div>").appendTo(QueryLoader.selectorPreload),$(QueryLoader.preloader).css({height:"0px",width:"0px",overflow:"hidden"});var length=QueryLoader.items.length;QueryLoader.doneStatus=length;for(var i=0;i<length;i++){var imgLoad=$("<img></img>");$(imgLoad).attr("src",QueryLoader.items[i]),$(imgLoad).unbind("load"),$(imgLoad).bind("load",function(){QueryLoader.imgCallback()}),$(imgLoad).appendTo($(QueryLoader.preloader))}},spawnLoader:function(){if("body"==QueryLoader.selectorPreload)var height=$(window).height(),width=$(window).width(),position="fixed";else var height=$(QueryLoader.selectorPreload).outerHeight(),width=$(QueryLoader.selectorPreload).outerWidth(),position="absolute";var left=$(QueryLoader.selectorPreload).offset().left,top=$(QueryLoader.selectorPreload).offset().top;QueryLoader.overlay=$("<div></div>").appendTo($(QueryLoader.selectorPreload)),$(QueryLoader.overlay).addClass("QOverlay"),$(QueryLoader.overlay).css({position:position,top:top,left:left,width:width+"px",height:height+"px"}),QueryLoader.loadBar=$("<div></div>").appendTo($(QueryLoader.overlay)),$(QueryLoader.loadBar).addClass("QLoader"),$(QueryLoader.loadBar).css({position:"relative",top:"50%",width:"0%"}),QueryLoader.loadAmt=$("<div>0%</div>").appendTo($(QueryLoader.overlay)),$(QueryLoader.loadAmt).addClass("QAmt"),$(QueryLoader.loadAmt).css({position:"relative",top:"50%",left:"50%"})},animateLoader:function(){var perc=100/QueryLoader.doneStatus*QueryLoader.doneNow;perc>99?($(QueryLoader.loadAmt).html("100%"),$(QueryLoader.loadBar).stop().animate({width:perc+"%"},500,"linear",function(){QueryLoader.doneLoad()})):($(QueryLoader.loadBar).stop().animate({width:perc+"%"},500,"linear",function(){}),$(QueryLoader.loadAmt).html(Math.floor(perc)+"%"))},doneLoad:function(){if(clearTimeout(QueryLoader.ieTimeout),"body"==QueryLoader.selectorPreload)var height=$(window).height();else var height=$(QueryLoader.selectorPreload).outerHeight();$(QueryLoader.loadAmt).hide(),$(QueryLoader.loadBar).animate({height:height+"px",top:0},500,"linear",function(){$(".preload-overlay").css({display:"none"}),$(QueryLoader.overlay).fadeOut(800),$(".header_line").shuffleLetters({step:20,fps:25}),$(".bold").shuffleLetters({step:20,fps:25}),$(QueryLoader.preloader).remove()})}};